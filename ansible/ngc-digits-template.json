{
  "apiVersion": "v1",
  "kind": "Template",
  "labels": {
    "template": "ngc-digits-template"
  },
  "message": "The following NGC-digits pod has been created: ${NGC_IMAGE}.\n\n",
  "metadata": {
    "annotations": {
      "description": "Template for NGC-digits",
      "iconClass": "icon-shadowman",
      "openshift.io/display-name": "NGC",
      "openshift.io/documentation-url": "https://ngc.nvidia.com/registry",
      "tags": "NVIDIA,machine-learning"
    },
    "name": "ngc-digits"
  },
  "objects": [
    {
      "apiVersion": "v1",
      "kind": "Service",
      "metadata": {
        "annotations": {
          "template.openshift.io/expose-uri": "digits://{.spec.clusterIP}:{.spec.ports[?(.name==\"digits\")].port}"
        },
        "name": "digits"
      },
      "spec": {
        "ports": [
          {
            "name": "digits",
            "nodePort": 0,
            "port": 8888,
            "protocol": "TCP",
            "targetPort": 5000
          }
        ],
        "selector": {
          "name": "digits"
              },
        "sessionAffinity": "None",
        "type": "ClusterIP"
      },
      "status": {
        "loadBalancer": {}
      }
    },
    {
      "apiVersion": "v1",
      "kind": "Pod",
      "metadata": {
	"name": "digits-18-09",
	"namespace": "nvidia"
      },
      "spec": {
	"restartPolicy": "OnFailure",
	"containers": [
	  {
            "name": "ngc",
            "image": "nvcr.io/nvidia/digits:18.09",
            "env": null,
	    "ports": [
	      {
		"hostPort": 8888,
		"containerPort": 5000,
		"protocol": "TCP"
	      }
	    ],
            "volumeMounts": [
              {
		"mountPath": "/dev/shm",
		"name": "dshm"
              }
            ],
            "securityContext": {
              "allowPrivilegeEscalation": false,
              "capabilities": {
		"drop": [
		  "ALL"
		]
              },
              "seLinuxOptions": {
		"type": "nvidia_container_t"
              }
            }
	  }
	],
	"volumes": [
	  {
            "name": "dshm",
            "empytDir": {
              "medium": "Memory"
            }
	  }
	]
      }
    }
  ],
  "parameters": [
    {
      "description": "Which framework image to use: nvcr.io/nvidia/caffe:18.09-py3 ...",
      "displayName": "NGC Framework Image",
      "name": "NGC_IMAGE",
      "value": "nvcr.io/nvidia/caffe:18.09-py3"
    },
    {
      "description": "Choose the display name of the container image: caffe, caffe2, cntk, ...",
      "displayName": "NGC Pod Name",
      "name": "NGC_POD_NAME",
      "value": "caffe-18.09-py2"
    }
  ]



}
