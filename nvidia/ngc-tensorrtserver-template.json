  {
    "apiVersion": "v1",
    "kind": "Template",
    "labels": {
      "template": "ngc-rapids-template"
    },
    "message": "The following NGC-RAPIDS  pod has been created: ${NGC_IMAGE}.\n\n",
    "metadata": {
      "annotations": {
        "description": "Template for NGC-RAPIDS",
        "iconClass": "icon-shadowman",
        "openshift.io/display-name": "NGC RAPIDS",
        "openshift.io/documentation-url": "https://ngc.nvidia.com/registry",
        "tags": "NVIDIA,machine-learning"
      },
      "name": "ngc-rapids"
    },
    "objects": [
      {
        "kind": "Service",
        "apiVersion": "v1",
        "metadata": {
    "name": "rapids-service"
        },
        "spec": {
    "selector": {
      "app": "rapids"
    },
    "ports": [
      {
              "name": "http",
              "protocol": "TCP",
              "port": 8888,
              "targetPort": 8888
      },
      {
              "name": "grpc",
              "port": 8787,
              "targetPort": 8787
      },
      {
              "name": "prometheus",
              "port": 8786,
              "targetPort": 8786
      }
    ],
    "sessionAffinity": "None",
          "type": "ClusterIP"
        }
      },
      {
        "apiVersion": "v1",
        "kind": "Pod",
        "metadata": {
    "name": "rapids",
    "labels": {
      "app": "rapids"
    }
        },
        "spec": {
    "restartPolicy": "OnFailure",
    "containers": [
      {
        "capabilities": {},
              "name": "rapids",
              "image": "rapidsai/rapidsai:latest",
        "command": ["/rapids/notebooks/utils/start-jupyter.sh"],
        "args": [""],
              "env": null,
        "ports": [
          {
      "containerPort": 8888,
      "name": "http"
          },
          {
      "containerPort": 8787,
      "name": "grpc"
          },
          {
      "containerPort": 8002,
      "name": "prometheus"
          }
        ],
              "volumeMounts": [
                {
      "mountPath": "/dev/shm",
      "name": "dshm"
                },
          {
      "mountPath": "/ngc",
      "name": "ngc"
          }
              ],
              "securityContext": {
                "allowPrivilegeEscalation": false,
                "capabilities": { },
          "privileged": false,
                "seLinuxOptions": {
      "type": "nvidia_container_t"
                }
              },
              "resources": {
                  "limits": {
                      "nvidia.com/gpu": "${NUM_GPUS}"
                  }
              }
            }
    ],
    "volumes": [
      {
              "name": "dshm",
              "empytDir": {
                "medium": "Memory"
              }
      },
      {
        "name": "ngc",
        "hostPath": {
          "path": "/ngc"
        }
      }
    ]
        }
      }
    ],
    "parameters": [
        {
            "description": "Volume of Model Store",
            "displayName": "Volume of Model Store",
            "name": "MODEL_STORE",
            "value": "/ngc"
        },
        {
        "description": "How many GPUs to use",
        "displayName": "Number of GPUs",
        "name": "NUM_GPUS",
        "value": "1"
      }
    ]
  }
